import 'dart:convert';import 'package:flutter/cupertino.dart';import 'package:flutter/material.dart';import 'package:flutter/services.dart';import 'package:fluttertoast/fluttertoast.dart';import 'package:http/http.dart';import 'package:shared_preferences/shared_preferences.dart';import 'package:syncfusion_flutter_sliders/sliders.dart';import '../Home/Home_screen.dart';import '../Speaker/Speaker_Bio.dart';import '../Utils/const.dart';import 'package:http/http.dart' as http;import 'dart:convert' as convert;import 'dropdown_button2.dart';class survey_screen extends StatefulWidget {  @override  _Survey_screenState createState() => _Survey_screenState();}GlobalKey myFormKey = new GlobalKey();class _Survey_screenState extends State<survey_screen> {  TextEditingController nameController = TextEditingController();  int _radioValue = 0;  String selected = "";  String? selectedValue;  int? speaker_selected_id;  String token_val = "";  var val = "";  late int myNumber;  String myValue = "";  double rate_1 = 0;  double rate_2 = 0;  var _result;  int rvalue = 0;  List speakerbio = [];  final String survey_url = base_url + 'survey';  Future<List<speaker_data>?> get_all_speakers(BuildContext context) async {    if (speakerbio.isEmpty) {      final uri_val = await http.get(        Uri.parse("${base_url}speakerbios"),        headers: <String, String>{"Content-Type": "application/json"},      );      if (uri_val.statusCode == 200) {        dynamic asdd = convert.jsonDecode(uri_val.body);        if (asdd.containsKey('success') == true) {          speakerbio = asdd["speakerbios"] as List;          // List<String> opt = speakerbio.map<speaker_data>((json) => speaker_data.fromJson(json)) as List<String>;          if (speakerbio.isNotEmpty) {            //dismiss dialog..!!            // Navigator.pop(context);            return speakerbio                .map<speaker_data>((json) => speaker_data.fromJson(json))                .toList();          }        }      } else {        return null;      }    } else {      return speakerbio          .map<speaker_data>((json) => speaker_data.fromJson(json))          .toList();    }  }  void survey_post_data(BuildContext context) async {    SharedPreferences pref = await shared_pref;    bool isOnline = await globals.hasNetwork();    if (isOnline) {      if (pref.containsKey("nomv_userid")) {        token_val = pref.getString("nomv_userid")!;        Map<String, String> headers = {'Content-Type': 'application/json'};        print("should_load is :- $speaker_selected_id  ${(rate_1).round()}"            "    ${(rate_2).round()}         $_result          $token_val  ");        final submit_json = jsonEncode({          "presenter_id": speaker_selected_id,          "presentation_rate": (rate_1).round(),          "presenter_rate": (rate_2).round(),          "recommendation": _result,          "user_id": token_val,        });        final response = await post(          Uri.parse(survey_url),          headers: headers,          body: submit_json,        );        if (response.statusCode == 200) {          Map<String, dynamic> resposne_body = jsonDecode(response.body);          if (resposne_body.containsKey('survey')) {            String success_msg = resposne_body['message'];            print(" message is:- $success_msg");            //dismiss dialog..!!            Navigator.pop(context);            Fluttertoast.showToast(                msg: success_msg,                toastLength: Toast.LENGTH_SHORT,                gravity: ToastGravity.BOTTOM,                timeInSecForIosWeb: 1,                backgroundColor: Color(0xff586BC6),                textColor: Colors.white,                fontSize: 16.0);            Navigator.push(              context,              MaterialPageRoute(builder: (context) => HomePage()),            );          } else {            //dismiss dialog..!!            Navigator.pop(context);            Fluttertoast.showToast(                msg: "Please Provide Data ",                toastLength: Toast.LENGTH_SHORT,                gravity: ToastGravity.BOTTOM,                timeInSecForIosWeb: 1,                backgroundColor: Color(0xff586BC6),                textColor: Colors.white,                fontSize: 16.0);          }        } else {          //dismiss dialog..!!          Navigator.pop(context);          Fluttertoast.showToast(              msg: "Failed to Submit , Try Again..!!",              toastLength: Toast.LENGTH_SHORT,              gravity: ToastGravity.BOTTOM,              timeInSecForIosWeb: 1,              backgroundColor: Color(0xff586BC6),              textColor: Colors.white,              fontSize: 16.0);        }      }    } else {      Fluttertoast.showToast(          msg: "Internet Is Required..!!",          toastLength: Toast.LENGTH_SHORT,          gravity: ToastGravity.BOTTOM,          timeInSecForIosWeb: 1,          backgroundColor: Color(0xff586BC6),          textColor: Colors.white,          fontSize: 16.0);      //dismiss dialog..!!      Navigator.pop(context);    }  }  @override  Widget build(BuildContext context) {    SystemChrome.setSystemUIOverlayStyle(        SystemUiOverlayStyle(statusBarColor: Colors.transparent));    return Stack(children: <Widget>[      WillPopScope(          onWillPop: () async => true,          child: Scaffold(              backgroundColor: Colors.white,              appBar: new AppBar(                centerTitle: true,                elevation: 0,                flexibleSpace: Container(                  decoration: BoxDecoration(                    image: DecorationImage(                      image:                          AssetImage('assets/images/upcoming_session.png'),                      fit: BoxFit.cover,                    ),                  ),                ),                leading: IconButton(                  constraints: BoxConstraints(maxHeight: 36),                  icon: Image.asset(                    'assets/images/menu.png',                    height: 15,                    width: 15,                    color: Colors.white,                    fit: BoxFit.cover,                  ),                  onPressed: () {                    Navigator.pop(context);                  },                ),                title: const Text('Survey',                    style: TextStyle(                        fontFamily: 'Karla',                        fontSize: 18.0,                        fontWeight: FontWeight.bold,                        color: Colors.white)),                backgroundColor: Colors.transparent,                automaticallyImplyLeading: false,              ),              body: Align(                child: Container(                  width: MediaQuery.of(context).size.width,                  height: MediaQuery.of(context).size.height,                  child: FutureBuilder(                      future: get_all_speakers(context),                      builder: (BuildContext ctx, AsyncSnapshot snapshot) {                        if (snapshot.connectionState == ConnectionState.done) {                          if (snapshot.data == null) {                            return Container(                              child: Center(                                child: Text(                                  "No Data Found...",                                  style: TextStyle(                                    fontSize: 16,                                    fontWeight: FontWeight.normal,                                    color: Colors.white,                                    fontFamily: 'Karla',                                  ),                                ),                              ),                            );                          } else {                            return SingleChildScrollView(                              child: Column(                                mainAxisAlignment: MainAxisAlignment.start,                                crossAxisAlignment: CrossAxisAlignment.start,                                children: <Widget>[                                  Container(                                    margin: EdgeInsets.only(                                        left: 20, right: 10, top: 20),                                    child: Text(                                      'Which Presenter would you like to rate ?',                                      textAlign: TextAlign.start,                                      style: TextStyle(                                        fontSize: 15.0,                                        fontFamily: 'Karla',                                        color: Color(0xffd7b563),                                        fontStyle: FontStyle.normal,                                      ),                                    ),                                  ),                                  SizedBox(height: 20.0),                                  Padding(                                    padding: const EdgeInsets.symmetric(                                        horizontal: 20, vertical: 10),                                    child: DropdownButtonFormField2(                                      decoration: InputDecoration(                                        enabledBorder: new OutlineInputBorder(                                          borderRadius: BorderRadius.only(                                              topLeft: Radius.circular(10),                                              topRight: Radius.circular(10),                                              bottomRight: Radius.circular(10),                                              bottomLeft: Radius.circular(10)),                                          borderSide:                                              BorderSide(color: Colors.grey),                                        ),                                        focusedBorder: new OutlineInputBorder(                                          borderRadius: BorderRadius.only(                                              topLeft: Radius.circular(10),                                              topRight: Radius.circular(10),                                              bottomRight: Radius.circular(10),                                              bottomLeft: Radius.circular(10)),                                          borderSide:                                              BorderSide(color: Colors.grey),                                        ),                                        isDense: true,                                        contentPadding: EdgeInsets.zero,                                      ),                                      isExpanded: true,                                      hint: const Text(                                        'Select Presenter',                                        style: TextStyle(                                          fontSize: 14,                                          color: Color(0xffd7b563),                                          fontFamily: 'Karla',                                        ),                                      ),                                      icon: const Icon(                                        Icons.arrow_drop_down,                                        color: Colors.white,                                      ),                                      iconSize: 30,                                      buttonHeight: 60,                                      buttonPadding: const EdgeInsets.only(                                          left: 20, right: 10, top: 0),                                      dropdownDecoration: BoxDecoration(                                          borderRadius: BorderRadius.circular(15),                                          gradient: LinearGradient(                                            begin: Alignment.bottomRight,                                            end: Alignment.topLeft,                                            colors: [                                              Color(0xff3EA9BD),                                              Color(0xff586BC6),                                              // Color.fromRGBO(130, 52, 243, 1),                                            ],                                          )                                      ),                                      items: List.generate(                                          snapshot.data.length ?? 0,                                          (i) => DropdownMenuItem<String>(                                                value: snapshot.data[i].name,                                                child: Text(                                                  snapshot.data[i].name,                                                  style: const TextStyle(                                                    fontFamily: 'Karla',                                                    color: Color(0xffd7b563),                                                    fontSize: 14,                                                  ),                                                ),                                              )).toList(),                                      onChanged: (value) {                                        selectedValue = value.toString();                                        print("find name is:- $value");                                        for (int itemIndex = 0;                                            itemIndex < snapshot.data.length;                                            itemIndex++) {                                          if (selectedValue ==                                              snapshot.data[itemIndex].name) {                                            speaker_selected_id =                                                snapshot.data[itemIndex].id;                                            print(                                                "find Id is:- $value    $speaker_selected_id");                                            break;                                          }                                        }                                      },                                      onSaved: (value) {},                                      validator: (value) {                                        if (value == null) {                                          return 'Please select speaker.';                                        }                                      },                                    ),                                  ),                                  SizedBox(height: 20.0),                                  Container(                                    margin: EdgeInsets.only(                                        left: 20, right: 10, top: 0),                                    child: Row(                                      mainAxisAlignment:                                          MainAxisAlignment.center,                                      children: [                                        Text("01" + "/03",                                            style: TextStyle(                                              fontSize: 16.0,                                              fontFamily: 'Karla',                                              color: Color(0xffd7b563),                                              fontStyle: FontStyle.normal,                                            )),                                        Expanded(                                          child: Padding(                                            padding:                                                const EdgeInsets.only(top: 10),                                            child: Divider(                                              indent: 10.0,                                              color: Color(0xffd7b563),                                              endIndent: 20.0,                                              thickness: 1,                                            ),                                          ),                                        ),                                      ],                                    ),                                  ),                                  SizedBox(height: 15.0),                                  //please rate the content..!! (1)                                  Column(                                    children: [                                      Container(                                          child: Container(                                        margin: EdgeInsets.only(                                            left: 13, right: 13),                                        decoration: BoxDecoration(                                          image: DecorationImage(                                            image:                                            AssetImage('assets/images/upcoming_session.png'),                                            fit: BoxFit.cover,                                          ),                                        ),                                        padding: EdgeInsets.only(                                            left: 15,                                            right: 15,                                            top: 15,                                            bottom: 15),                                        child: Text(                                          'Please rate the presentation and content',                                          style: TextStyle(                                            fontSize: 16.0,                                            fontWeight: FontWeight.w700,                                            color: Colors.white,                                            fontFamily: 'Karla',                                            fontStyle: FontStyle.normal,                                          ),                                        ),                                      )),                                      Container(                                        alignment: Alignment.centerLeft,                                        height:                                            MediaQuery.of(context).size.height /                                                6,                                        width: double.infinity,                                        padding: EdgeInsets.only(                                            left: 0, top: 0.0, right: 0),                                        margin: EdgeInsets.only(                                            left: 15.0,                                            top: 0.0,                                            right: 15.0,                                            bottom: 0.0),                                        decoration: BoxDecoration(                                          borderRadius: BorderRadius.only(                                              bottomLeft: Radius.circular(10),                                              bottomRight: Radius.circular(10)),                                          color: Colors.white,                                          boxShadow: [                                            BoxShadow(                                                color: Colors.white,                                                spreadRadius: 2),                                          ],                                        ),                                        child: Column(                                          mainAxisAlignment:                                              MainAxisAlignment.start,                                          crossAxisAlignment:                                              CrossAxisAlignment.center,                                          children: <Widget>[                                            SizedBox(height: 15),                                            Container(                                              padding: EdgeInsets.only(                                                  left: 0, top: 0.0, right: 0),                                              margin: EdgeInsets.only(                                                  left: 15.0,                                                  top: 0.0,                                                  right: 15.0,                                                  bottom: 0.0),                                              alignment: Alignment.centerLeft,                                              child: Text(                                                '*Rate from 1 to 5',                                                textAlign: TextAlign.start,                                                style: TextStyle(                                                  color: Color(0xffd7b563),                                                  fontWeight: FontWeight.bold,                                                  fontSize: 12.0,                                                  fontFamily: 'Karla',                                                ),                                              ),                                            ),                                            SizedBox(height: 10),                                            Container(                                              // child: NumericStepButton(                                              //   prev: rate_1,                                              //   maxValue: 5,                                              //   onChanged: (value) {                                              //     rate_1 = value;                                              //   },                                              // ),                                              child: SfSlider(                                                min: 0.0,                                                max: 5.0,                                                interval: 1,                                                value: rate_1,                                                showTicks: true,                                                showLabels: true,                                                enableTooltip: false,                                                labelPlacement: LabelPlacement.betweenTicks,                                                minorTicksPerInterval: 1,                                                onChanged: (dynamic value) {                                                  setState(() {                                                    rate_1 = value;                                                  });                                                },                                              ),                                            ),                                            Container(                                              padding: EdgeInsets.only(                                                  left: 20,                                                  top: 10.0,                                                  right: 20),                                              child: Row(                                                crossAxisAlignment:                                                    CrossAxisAlignment.start,                                                mainAxisAlignment:                                                    MainAxisAlignment                                                        .spaceBetween,                                                children: <Widget>[                                                  Text('Low',                                                      style: TextStyle(                                                        color: Colors.black,                                                        fontSize: 12.0,                                                        letterSpacing: 0.5,                                                        fontFamily: 'Karla',                                                      )),                                                  Text('High',                                                      style: TextStyle(                                                        color: Colors.black,                                                        fontSize: 12.0,                                                        fontFamily: 'Karla',                                                      )),                                                ],                                              ),                                            ),                                          ],                                        ),                                      )                                    ],                                  ),                                  SizedBox(height: 20.0),                                  Container(                                    margin: EdgeInsets.only(                                        left: 20, right: 10, top: 0),                                    child: Row(                                      mainAxisAlignment:                                          MainAxisAlignment.center,                                      children: [                                        Text("02" + "/03",                                            style: TextStyle(                                              fontSize: 16.0,                                              fontFamily: 'Karla',                                              color: Color(0xffd7b563),                                            )),                                        Expanded(                                          child: Padding(                                            padding:                                                const EdgeInsets.only(top: 10),                                            child: Divider(                                              indent: 10.0,                                              endIndent: 20.0,                                              color: Color(0xffd7b563),                                              thickness: 1,                                            ),                                          ),                                        ),                                      ],                                    ),                                  ),                                  SizedBox(height: 15.0),                                  //recommand (2)                                  Column(                                    children: [                                      Container(                                          child: Container(                                        margin: EdgeInsets.only(                                            left: 13, right: 13),                                        decoration: BoxDecoration(                                          image: DecorationImage(                                            image:                                            AssetImage('assets/images/upcoming_session.png'),                                            fit: BoxFit.cover,                                          ),                                        ),                                        padding: EdgeInsets.only(                                            left: 15,                                            right: 15,                                            top: 15,                                            bottom: 15),                                        child: Text(                                          'Please rate the presenter(s) and his/her ability to present',                                          style: TextStyle(                                            fontSize: 16.0,                                            fontWeight: FontWeight.w700,                                            color: Colors.white,                                            fontFamily: 'Karla',                                            fontStyle: FontStyle.normal,                                          ),                                        ),                                      )),                                      Container(                                        alignment: Alignment.centerLeft,                                        height:                                            MediaQuery.of(context).size.height /                                                6,                                        width: double.infinity,                                        padding: EdgeInsets.only(                                            left: 0, top: 0.0, right: 0),                                        margin: EdgeInsets.only(                                            left: 15.0,                                            top: 0.0,                                            right: 15.0,                                            bottom: 0.0),                                        // decoration: BoxDecoration(                                        //   image: DecorationImage(                                        //     image:                                        //     AssetImage('assets/images/upcoming_session.png'),                                        //     fit: BoxFit.cover,                                        //   ),                                        // ),                                        child: Column(                                          mainAxisAlignment:                                              MainAxisAlignment.start,                                          crossAxisAlignment:                                              CrossAxisAlignment.center,                                          children: <Widget>[                                            SizedBox(height: 15),                                            Container(                                              padding: EdgeInsets.only(                                                  left: 0, top: 0.0, right: 0),                                              margin: EdgeInsets.only(                                                  left: 15.0,                                                  top: 0.0,                                                  right: 15.0,                                                  bottom: 0.0),                                              alignment: Alignment.centerLeft,                                              child: Text(                                                '*Rate from 1 to 5',                                                textAlign: TextAlign.start,                                                style: TextStyle(                                                  color: Color(0xffd7b563),                                                  fontSize: 12.0,                                                  fontWeight: FontWeight.bold,                                                  fontFamily: 'Karla',                                                ),                                              ),                                            ),                                            SizedBox(height: 10),                                            Container(                                              child: SfSlider(                                                min: 0.0,                                                max: 5.0,                                                interval: 1,                                                value: rate_2,                                                showTicks: true,                                                showLabels: true,                                                enableTooltip: false,                                                labelPlacement: LabelPlacement.betweenTicks,                                                minorTicksPerInterval: 1,                                                onChanged: (dynamic value) {                                                  setState(() {                                                    rate_2 = value;                                                  });                                                },                                              ),                                            ),                                            Container(                                              padding: EdgeInsets.only(                                                  left: 20,                                                  top: 10.0,                                                  right: 20),                                              child: Row(                                                crossAxisAlignment:                                                    CrossAxisAlignment.start,                                                mainAxisAlignment:                                                    MainAxisAlignment                                                        .spaceBetween,                                                children: <Widget>[                                                  Text('Low',                                                      style: TextStyle(                                                        color: Colors.black,                                                        fontSize: 12.0,                                                        letterSpacing: 0.5,                                                        fontFamily: 'Karla',                                                      )),                                                  Text('High',                                                      style: TextStyle(                                                        color: Colors.black,                                                        fontSize: 12.0,                                                        fontFamily: 'Karla',                                                      )),                                                ],                                              ),                                            ),                                          ],                                        ),                                      )                                    ],                                  ),                                  SizedBox(height: 20.0),                                  Container(                                    margin: EdgeInsets.only(                                        left: 20, right: 10, top: 0),                                    child: Row(                                      mainAxisAlignment:                                          MainAxisAlignment.center,                                      children: [                                        Text("03" + "/03",                                            style: TextStyle(                                              fontSize: 16.0,                                              fontFamily: 'Karla',                                              color: Color(0xffd7b563),                                            )),                                        Expanded(                                          child: Padding(                                            padding:                                                const EdgeInsets.only(top: 10),                                            child: Divider(                                              indent: 10.0,                                              endIndent: 20.0,                                              color: Color(0xffd7b563),                                              thickness: 1,                                            ),                                          ),                                        ),                                      ],                                    ),                                  ),                                  SizedBox(height: 15.0),                                  //recommand (3)                                  Column(                                    children: [                                      Container(                                          child: Container(                                        margin: EdgeInsets.only(                                            left: 13, right: 13),                                        decoration: BoxDecoration(                                          image: DecorationImage(                                            image:                                            AssetImage('assets/images/upcoming_session.png'),                                            fit: BoxFit.cover,                                          ),                                        ),                                        padding: EdgeInsets.only(                                            left: 15,                                            right: 15,                                            top: 15,                                            bottom: 15),                                        child: Text(                                          'Would you recommend this presentation for another AGXPE event?',                                          style: TextStyle(                                            fontSize: 16.0,                                            fontWeight: FontWeight.w700,                                            color: Colors.white,                                            fontFamily: 'Karla',                                            fontStyle: FontStyle.normal,                                          ),                                        ),                                      )),                                      Container(                                        alignment: Alignment.centerLeft,                                        width: double.infinity,                                        padding: EdgeInsets.only(                                            left: 0, top: 0.0, right: 0),                                        margin: EdgeInsets.only(                                            left: 15.0,                                            top: 0.0,                                            right: 15.0,                                            bottom: 0.0),                                        child: Column(                                          mainAxisAlignment:                                              MainAxisAlignment.start,                                          children: [                                            RadioListTile(                                                title: Align(                                                  child: Text('Yes',                                                      style: TextStyle(                                                        fontSize: 15,                                                        fontFamily: 'Karla',                                                      )),                                                  alignment: Alignment(-1.1, 0),                                                ),                                                value: 'Yes',                                                groupValue: _result,                                                contentPadding: EdgeInsets.only(                                                    // Add this                                                    left: 15,                                                    right: 0,                                                    bottom: 0,                                                    top: 0),                                                dense: true,                                                onChanged: (value) {                                                  setState(() {                                                    _result = value;                                                    print(                                                        " message is:- $_result");                                                  });                                                }),                                            RadioListTile(                                                // title: const Text('No'),                                                title: Align(                                                  child: Text('No',                                                      style: TextStyle(                                                        fontSize: 15,                                                        fontFamily: 'Karla',                                                      )),                                                  alignment: Alignment(-1.1, 0),                                                ),                                                value: 'No',                                                groupValue: _result,                                                contentPadding: EdgeInsets.only(                                                    // Add this                                                    left: 15,                                                    right: 0,                                                    bottom: 0,                                                    top: 0),                                                dense: true,                                                onChanged: (value) {                                                  setState(() {                                                    _result = value;                                                    print(                                                        " message is:- $_result");                                                  });                                                }),                                          ],                                        ),                                      )                                    ],                                  ),                                  SizedBox(height: 20.0),                                  InkWell(                                    onTap: () {                                      print(                                          " messagessss:- $speaker_selected_id  $rate_1  $rate_2    $_result      $token_val");                                      showLoaderDialog(context);                                      if (rate_1 != 0 && rate_2 != 0) {                                        survey_post_data(context);                                      } else {                                        Navigator.pop(context);                                        Fluttertoast.showToast(                                            msg: "Credentials Required..!!",                                            toastLength: Toast.LENGTH_SHORT,                                            gravity: ToastGravity.BOTTOM,                                            timeInSecForIosWeb: 1,                                            backgroundColor: Color(0xff586BC6),                                            textColor: Colors.white,                                            fontSize: 16.0);                                      }                                    },                                    child: Container(                                      height: 50,                                      decoration: BoxDecoration(                                        image: DecorationImage(                                          image:                                          AssetImage('assets/images/upcoming_session.png'),                                          fit: BoxFit.cover,                                        ),                                      ),                                      margin: EdgeInsets.only(                                          top: 5,                                          bottom: 20,                                          left: 30,                                          right: 30),                                      child: Center(                                          child: Text(                                        'Submit',                                        style: TextStyle(                                            fontSize: 16,                                            fontFamily: 'Karla',                                            color: Colors.white),                                      )),                                    ),                                  ),                                ],                              ),                            );                          }                        }                        else {                          if (speakerbio.isEmpty) {                            return Center(                              child: Container(                                  width: 40.0,                                  height: 40.0,                                child: const CircularProgressIndicator(                                    backgroundColor: Color(0xffd7b563),                                    valueColor: AlwaysStoppedAnimation<Color>(Color(0xff714CBF))),),                            );                          } else {                            return SingleChildScrollView(                              child: Column(                                mainAxisAlignment: MainAxisAlignment.start,                                crossAxisAlignment: CrossAxisAlignment.start,                                children: <Widget>[                                  Container(                                    margin: EdgeInsets.only(                                        left: 20, right: 10, top: 20),                                    child: Text(                                      'Which Presenter would you like to rate ?',                                      textAlign: TextAlign.start,                                      style: TextStyle(                                        fontSize: 15.0,                                        fontFamily: 'Karla',                                        color: Color(0xffd7b563),                                        fontWeight: FontWeight.bold,                                      ),                                    ),                                  ),                                  SizedBox(height: 20.0),                                  Padding(                                    padding: const EdgeInsets.symmetric(                                        horizontal: 20, vertical: 10),                                    child: DropdownButtonFormField2(                                      decoration: InputDecoration(                                        enabledBorder: new OutlineInputBorder(                                          borderRadius: BorderRadius.only(                                              topLeft: Radius.circular(10),                                              topRight: Radius.circular(10),                                              bottomRight: Radius.circular(10),                                              bottomLeft: Radius.circular(10)),                                          borderSide:                                          BorderSide(color: Colors.grey),                                        ),                                        focusedBorder: new OutlineInputBorder(                                          borderRadius: BorderRadius.only(                                              topLeft: Radius.circular(10),                                              topRight: Radius.circular(10),                                              bottomRight: Radius.circular(10),                                              bottomLeft: Radius.circular(10)),                                          borderSide:                                          BorderSide(color: Colors.grey),                                        ),                                        isDense: true,                                        contentPadding: EdgeInsets.zero,                                      ),                                      isExpanded: true,                                      hint: const Text(                                        'Select Presenter',                                        style: TextStyle(                                          fontSize: 14,                                          color: Color(0xffd7b563),                                          fontFamily: 'Karla',                                        ),                                      ),                                      icon: const Icon(                                        Icons.arrow_drop_down,                                        color: Colors.white,                                      ),                                      iconSize: 30,                                      buttonHeight: 60,                                      buttonPadding: const EdgeInsets.only(                                          left: 20, right: 10, top: 0),                                      dropdownDecoration: BoxDecoration(                                          borderRadius: BorderRadius.circular(15),                                          gradient: LinearGradient(                                            begin: Alignment.bottomRight,                                            end: Alignment.topLeft,                                            colors: [                                              Color(0xff3EA9BD),                                              Color(0xff586BC6),                                              // Color.fromRGBO(130, 52, 243, 1),                                            ],                                          )                                      ),                                      items: List.generate(                                          snapshot.data.length ?? 0,                                              (i) => DropdownMenuItem<String>(                                            value: snapshot.data[i].name,                                            child: Text(                                              snapshot.data[i].name,                                              style: const TextStyle(                                                fontFamily: 'Karla',                                                color: Color(0xffd7b563),                                                fontSize: 14,                                              ),                                            ),                                          )).toList(),                                      onChanged: (value) {                                        selectedValue = value.toString();                                        print("find name is:- $value");                                        for (int itemIndex = 0;                                        itemIndex < snapshot.data.length;                                        itemIndex++) {                                          if (selectedValue ==                                              snapshot.data[itemIndex].name) {                                            speaker_selected_id =                                                snapshot.data[itemIndex].id;                                            print(                                                "find Id is:- $value    $speaker_selected_id");                                            break;                                          }                                        }                                      },                                      onSaved: (value) {},                                      validator: (value) {                                        if (value == null) {                                          return 'Please select speaker.';                                        }                                      },                                    ),                                  ),                                  SizedBox(height: 20.0),                                  Container(                                    margin: EdgeInsets.only(                                        left: 20, right: 10, top: 0),                                    child: Row(                                      mainAxisAlignment:                                      MainAxisAlignment.center,                                      children: [                                        Text("01" + "/03",                                            style: TextStyle(                                              fontSize: 16.0,                                              fontFamily: 'Karla',                                              color: Color(0xffd7b563),                                              fontStyle: FontStyle.normal,                                            )),                                        Expanded(                                          child: Padding(                                            padding:                                            const EdgeInsets.only(top: 10),                                            child: Divider(                                              indent: 10.0,                                              color: Color(0xffd7b563),                                              endIndent: 20.0,                                              thickness: 1,                                            ),                                          ),                                        ),                                      ],                                    ),                                  ),                                  SizedBox(height: 15.0),                                  //please rate the content..!! (1)                                  Column(                                    children: [                                      Container(                                          child: Container(                                            margin: EdgeInsets.only(                                                left: 13, right: 13),                                            decoration: BoxDecoration(                                              image: DecorationImage(                                                image:                                                AssetImage('assets/images/upcoming_session.png'),                                                fit: BoxFit.cover,                                              ),                                            ),                                            padding: EdgeInsets.only(                                                left: 15,                                                right: 15,                                                top: 15,                                                bottom: 15),                                            child: Text(                                              'Please rate the presentation and content',                                              style: TextStyle(                                                fontSize: 16.0,                                                fontWeight: FontWeight.w700,                                                color: Colors.white,                                                fontFamily: 'Karla',                                                fontStyle: FontStyle.normal,                                              ),                                            ),                                          )),                                      Container(                                        alignment: Alignment.centerLeft,                                        height:                                        MediaQuery.of(context).size.height /                                            6,                                        width: double.infinity,                                        padding: EdgeInsets.only(                                            left: 0, top: 0.0, right: 0),                                        margin: EdgeInsets.only(                                            left: 15.0,                                            top: 0.0,                                            right: 15.0,                                            bottom: 0.0),                                        decoration: BoxDecoration(                                          borderRadius: BorderRadius.only(                                              bottomLeft: Radius.circular(10),                                              bottomRight: Radius.circular(10)),                                          color: Colors.white,                                          boxShadow: [                                            BoxShadow(                                                color: Colors.white,                                                spreadRadius: 2),                                          ],                                        ),                                        child: Column(                                          mainAxisAlignment:                                          MainAxisAlignment.start,                                          crossAxisAlignment:                                          CrossAxisAlignment.center,                                          children: <Widget>[                                            SizedBox(height: 15),                                            Container(                                              padding: EdgeInsets.only(                                                  left: 0, top: 0.0, right: 0),                                              margin: EdgeInsets.only(                                                  left: 15.0,                                                  top: 0.0,                                                  right: 15.0,                                                  bottom: 0.0),                                              alignment: Alignment.centerLeft,                                              child: Text(                                                '*Rate from 1 to 5',                                                textAlign: TextAlign.start,                                                style: TextStyle(                                                  color: Color(0xffd7b563),                                                  fontSize: 12.0,                                                  fontWeight: FontWeight.bold,                                                  fontFamily: 'Karla',                                                ),                                              ),                                            ),                                            SizedBox(height: 10),                                            Container(                                              // child: NumericStepButton(                                              //   prev: rate_1,                                              //   maxValue: 5,                                              //   onChanged: (value) {                                              //     rate_1 = value;                                              //   },                                              // ),                                              child: SfSlider(                                                min: 0.0,                                                max: 5.0,                                                interval: 1,                                                value: rate_1,                                                showTicks: true,                                                showLabels: true,                                                enableTooltip: false,                                                labelPlacement: LabelPlacement.betweenTicks,                                                minorTicksPerInterval: 1,                                                onChanged: (dynamic value) {                                                  setState(() {                                                    rate_1 = value;                                                  });                                                },                                              ),                                            ),                                            Container(                                              padding: EdgeInsets.only(                                                  left: 20,                                                  top: 10.0,                                                  right: 20),                                              child: Row(                                                crossAxisAlignment:                                                CrossAxisAlignment.start,                                                mainAxisAlignment:                                                MainAxisAlignment                                                    .spaceBetween,                                                children: <Widget>[                                                  Text('Low',                                                      style: TextStyle(                                                        color: Colors.black,                                                        fontSize: 12.0,                                                        letterSpacing: 0.5,                                                        fontFamily: 'Karla',                                                      )),                                                  Text('High',                                                      style: TextStyle(                                                        color: Colors.black,                                                        fontSize: 12.0,                                                        fontFamily: 'Karla',                                                      )),                                                ],                                              ),                                            ),                                          ],                                        ),                                      )                                    ],                                  ),                                  SizedBox(height: 20.0),                                  Container(                                    margin: EdgeInsets.only(                                        left: 20, right: 10, top: 0),                                    child: Row(                                      mainAxisAlignment:                                      MainAxisAlignment.center,                                      children: [                                        Text("02" + "/03",                                            style: TextStyle(                                              fontSize: 16.0,                                              fontFamily: 'Karla',                                              color: Color(0xffd7b563),                                            )),                                        Expanded(                                          child: Padding(                                            padding:                                            const EdgeInsets.only(top: 10),                                            child: Divider(                                              indent: 10.0,                                              endIndent: 20.0,                                              color: Color(0xffd7b563),                                              thickness: 1,                                            ),                                          ),                                        ),                                      ],                                    ),                                  ),                                  SizedBox(height: 15.0),                                  //recommand (2)                                  Column(                                    children: [                                      Container(                                          child: Container(                                            margin: EdgeInsets.only(                                                left: 13, right: 13),                                            decoration: BoxDecoration(                                              image: DecorationImage(                                                image:                                                AssetImage('assets/images/upcoming_session.png'),                                                fit: BoxFit.cover,                                              ),                                            ),                                            padding: EdgeInsets.only(                                                left: 15,                                                right: 15,                                                top: 15,                                                bottom: 15),                                            child: Text(                                              'Please rate the presenter(s) and his/her ability to present',                                              style: TextStyle(                                                fontSize: 16.0,                                                fontWeight: FontWeight.w700,                                                color: Colors.white,                                                fontFamily: 'Karla',                                                fontStyle: FontStyle.normal,                                              ),                                            ),                                          )),                                      Container(                                        alignment: Alignment.centerLeft,                                        height:                                        MediaQuery.of(context).size.height /                                            6,                                        width: double.infinity,                                        padding: EdgeInsets.only(                                            left: 0, top: 0.0, right: 0),                                        margin: EdgeInsets.only(                                            left: 15.0,                                            top: 0.0,                                            right: 15.0,                                            bottom: 0.0),                                        // decoration: BoxDecoration(                                        //   image: DecorationImage(                                        //     image:                                        //     AssetImage('assets/images/upcoming_session.png'),                                        //     fit: BoxFit.cover,                                        //   ),                                        // ),                                        child: Column(                                          mainAxisAlignment:                                          MainAxisAlignment.start,                                          crossAxisAlignment:                                          CrossAxisAlignment.center,                                          children: <Widget>[                                            SizedBox(height: 15),                                            Container(                                              padding: EdgeInsets.only(                                                  left: 0, top: 0.0, right: 0),                                              margin: EdgeInsets.only(                                                  left: 15.0,                                                  top: 0.0,                                                  right: 15.0,                                                  bottom: 0.0),                                              alignment: Alignment.centerLeft,                                              child: Text(                                                '*Rate from 1 to 5',                                                textAlign: TextAlign.start,                                                style: TextStyle(                                                  color: Color(0xffd7b563),                                                  fontSize: 12.0,                                                  fontWeight: FontWeight.bold,                                                  fontFamily: 'Karla',                                                ),                                              ),                                            ),                                            SizedBox(height: 10),                                            Container(                                              // child: NumericStepButton(                                              //   prev: rate_2,                                              //   maxValue: 5,                                              //   onChanged: (value) {                                              //     rate_2 = value;                                              //   },                                              // ),                                              child: SfSlider(                                                min: 0.0,                                                max: 5.0,                                                interval: 1,                                                value: rate_2,                                                showTicks: true,                                                showLabels: true,                                                enableTooltip: false,                                                labelPlacement: LabelPlacement.betweenTicks,                                                minorTicksPerInterval: 1,                                                onChanged: (dynamic value) {                                                  setState(() {                                                    rate_2 = value;                                                  });                                                },                                              ),                                            ),                                            Container(                                              padding: EdgeInsets.only(                                                  left: 20,                                                  top: 10.0,                                                  right: 20),                                              child: Row(                                                crossAxisAlignment:                                                CrossAxisAlignment.start,                                                mainAxisAlignment:                                                MainAxisAlignment                                                    .spaceBetween,                                                children: <Widget>[                                                  Text('Low',                                                      style: TextStyle(                                                        color: Colors.black,                                                        fontSize: 12.0,                                                        letterSpacing: 0.5,                                                        fontFamily: 'Karla',                                                      )),                                                  Text('High',                                                      style: TextStyle(                                                        color: Colors.black,                                                        fontSize: 12.0,                                                        fontFamily: 'Karla',                                                      )),                                                ],                                              ),                                            ),                                          ],                                        ),                                      )                                    ],                                  ),                                  SizedBox(height: 20.0),                                  Container(                                    margin: EdgeInsets.only(                                        left: 20, right: 10, top: 0),                                    child: Row(                                      mainAxisAlignment:                                      MainAxisAlignment.center,                                      children: [                                        Text("03" + "/03",                                            style: TextStyle(                                              fontSize: 16.0,                                              fontFamily: 'Karla',                                              color: Color(0xffd7b563),                                            )),                                        Expanded(                                          child: Padding(                                            padding:                                            const EdgeInsets.only(top: 10),                                            child: Divider(                                              indent: 10.0,                                              endIndent: 20.0,                                              color: Color(0xffd7b563),                                              thickness: 1,                                            ),                                          ),                                        ),                                      ],                                    ),                                  ),                                  SizedBox(height: 15.0),                                  //recommand (3)                                  Column(                                    children: [                                      Container(                                          child: Container(                                            margin: EdgeInsets.only(                                                left: 13, right: 13),                                            decoration: BoxDecoration(                                              image: DecorationImage(                                                image:                                                AssetImage('assets/images/upcoming_session.png'),                                                fit: BoxFit.cover,                                              ),                                            ),                                            padding: EdgeInsets.only(                                                left: 15,                                                right: 15,                                                top: 15,                                                bottom: 15),                                            child: Text(                                              'Would you recommend this presentation for another AGXPE event?',                                              style: TextStyle(                                                fontSize: 16.0,                                                fontWeight: FontWeight.w700,                                                color: Colors.white,                                                fontFamily: 'Karla',                                                fontStyle: FontStyle.normal,                                              ),                                            ),                                          )),                                      Container(                                        alignment: Alignment.centerLeft,                                        width: double.infinity,                                        // decoration: BoxDecoration(color: Color.fromRGBO(34, 41, 72, 0.9)),                                        padding: EdgeInsets.only(                                            left: 0, top: 0.0, right: 0),                                        margin: EdgeInsets.only(                                            left: 15.0,                                            top: 0.0,                                            right: 15.0,                                            bottom: 0.0),                                        child: Column(                                          mainAxisAlignment:                                          MainAxisAlignment.start,                                          children: [                                            RadioListTile(                                                title: Align(                                                  child: Text('Yes',                                                      style: TextStyle(                                                        fontSize: 15,                                                        fontFamily: 'Karla',                                                      )),                                                  alignment: Alignment(-1.1, 0),                                                ),                                                value: 'Yes',                                                groupValue: _result,                                                contentPadding: EdgeInsets.only(                                                  // Add this                                                    left: 15,                                                    right: 0,                                                    bottom: 0,                                                    top: 0),                                                dense: true,                                                onChanged: (value) {                                                  setState(() {                                                    _result = value;                                                    print(                                                        " message is:- $_result");                                                  });                                                }),                                            RadioListTile(                                              // title: const Text('No'),                                                title: Align(                                                  child: Text('No',                                                      style: TextStyle(                                                        fontSize: 15,                                                        fontFamily: 'Karla',                                                      )),                                                  alignment: Alignment(-1.1, 0),                                                ),                                                value: 'No',                                                groupValue: _result,                                                contentPadding: EdgeInsets.only(                                                  // Add this                                                    left: 15,                                                    right: 0,                                                    bottom: 0,                                                    top: 0),                                                dense: true,                                                onChanged: (value) {                                                  setState(() {                                                    _result = value;                                                    print(                                                        " message is:- $_result");                                                  });                                                }),                                          ],                                        ),                                      )                                    ],                                  ),                                  SizedBox(height: 20.0),                                  InkWell(                                    onTap: () {                                      print(                                          " messagessss:- $speaker_selected_id  $rate_1  $rate_2    $_result      $token_val");                                      showLoaderDialog(context);                                      if (rate_1 != 0 && rate_2 != 0) {                                        survey_post_data(context);                                      } else {                                        Navigator.pop(context);                                        Fluttertoast.showToast(                                            msg: "Credentials Required..!!",                                            toastLength: Toast.LENGTH_SHORT,                                            gravity: ToastGravity.BOTTOM,                                            timeInSecForIosWeb: 1,                                            backgroundColor: Color(0xff586BC6),                                            textColor: Colors.white,                                            fontSize: 16.0);                                      }                                    },                                    child: Container(                                      height: 50,                                      decoration: BoxDecoration(                                        image: DecorationImage(                                          image:                                          AssetImage('assets/images/upcoming_session.png'),                                          fit: BoxFit.cover,                                        ),                                      ),                                      margin: EdgeInsets.only(                                          top: 5,                                          bottom: 20,                                          left: 30,                                          right: 30),                                      child: Center(                                          child: Text(                                            'Submit',                                            style: TextStyle(                                                fontSize: 16,                                                fontFamily: 'Karla',                                                color: Colors.white),                                          )),                                    ),                                  ),                                ],                              ),                            );                          }                        }                      }),                ),              )))    ]);  }}showLoaderDialog(BuildContext context) {  return showDialog(      context: context,      barrierDismissible: false,      builder: (BuildContext context) {        return Center(          child: Container(              width: 40.0,              height: 40.0,            child: const CircularProgressIndicator(                backgroundColor: Color(0xffd7b563),                valueColor: AlwaysStoppedAnimation<Color>(Color(0xff714CBF))),),        );      });}final List<Map> data = [  {'value': 1, 'display': 'Yes'},  {'value': 2, 'display': 'No'}];